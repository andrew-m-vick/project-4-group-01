<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Used Car Price Prediction</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <link href="https://bootswatch.com/5/lux/bootstrap.min.css" rel="stylesheet"> 
  <link href="./static/css/static.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  <style>
    #prediction-result {
      display: none;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg bg-primary" data-bs-theme="dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="/"><img src="static/images/cartoon_car.png" height="30px"></a>
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link active" href="/predict">Predict Car Price</a> 
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/tableau">Tableau Story</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about_us">About Us</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/resources">Resources</a>
        </li>
      </ul>
    </div>
  </nav>

  <br/>

  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12 text-center">
        <br><br>
        <h1>Used Car Price Prediction</h1>
        <br><br>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 offset-md-3"> 
        <div id="prediction-form">
          <form method="POST" action="/predict" class="needs-validation" novalidate>

            <div class="mb-3">
              <label for="make" class="form-label">Make:</label>
              <input type="text" class="form-control" name="make" required> 
            </div>

            <div class="mb-3">
              <label for="model" class="form-label">Model:</label>
              <input type="text" class="form-control" name="model" required> 
            </div>

            <div class="mb-3">
              <label for="year" class="form-label">Year:</label>
              <input type="number" class="form-control" name="year" min="1900" max="2024" required> 
            </div>

            <div class="mb-3">
              <label for="miles" class="form-label">Miles:</label>
              <input type="number" class="form-control" name="miles" min="0" required> 
            </div>

            <div class="mb-3">
              <label for="body_type" class="form-label">Body Type:</label>
              <input type="text" class="form-control" name="body_type" required> 
            </div>

            <div class="mb-3">
              <label for="vehicle_type" class="form-label">Vehicle Type:</label>
              <input type="text" class="form-control" name="vehicle_type" required> 
            </div>

            <div class="mb-3">
              <label for="drivetrain" class="form-label">Drivetrain:</label>
              <input type="text" class="form-control" name="drivetrain" required> 
            </div>

            <div class="mb-3">
              <label for="transmission" class="form-label">Transmission:</label>
              <select class="form-select" name="transmission" required> 
                <option value="Automatic">Automatic</option>
                <option value="Manual">Manual</option>
              </select>
            </div>

            <div class="mb-3">


              <label for="fuel_type" class="form-label">Fuel Type:</label>
              <select class="form-select" name="fuel_type" required> 
                <option value="Gas">Gas</option>
                <option value="Hybrid">Hybrid</option>
                <option value="Diesel">Diesel</option>
                <option value="Electric">Electric</option>
              </select>
            </div>

            <div class="mb-3">


              <label for="engine_size" class="form-label">Engine Size:</label>
              <input type="number" class="form-control" step="0.1" name="engine_size" required> 
            </div>

            <div class="mb-3">
              <label for="engine_block" class="form-label">Engine Block:</label>
              <input type="text" class="form-control" name="engine_block" required> 
            </div>

            <div class="mb-3">
              <label for="state" class="form-label">State:</label>
              <input type="text" class="form-control" name="state" pattern="[A-Z]{2}" required>

 
            </div>

            <div class="d-grid gap-2 mb-5">
              <button class="btn btn-primary" type="submit">Predict</button>
            </div>
          </form>
        </div>

        <div id="prediction-result">
          <h2>Predicted Price: <span id="price"></span></h2> 
          <br>
          <a href="/predict" class="btn btn-primary">Predict Another Car</a> 
        </div>
      </div>
    </div>
  </div>

  <script>
    const form = document.querySelector('form');
    const predictionResult = document.getElementById('prediction-result');
    const predictionForm = document.getElementById('prediction-form');



    form.addEventListener('submit', (event) => {
      event.preventDefault(); 

      fetch('/predict', { 
        method: 'POST',
        body: new FormData(form)
      })
      .then(response => response.json())
      .then(data => {
        document.getElementById('price').textContent = '$' + data.prediction.toFixed(2); 
        predictionResult.style.display = 'block';
        predictionForm.style.display = 'none';
      })
      .catch(error => {
        console.error('Error:', error);
      });
    });

    (() => {
      'use strict'
      const forms = document.querySelectorAll('.needs-validation')
      Array.from(forms).forEach(form => {
        form.addEventListener('submit', event => {
          if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
          }
          form.classList.add('was-validated')
        }, false)
      })
    })()
  </script>
</body>
</html>